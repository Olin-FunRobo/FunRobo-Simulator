<launch>

	<arg name="show_sensors" default="true"/>
	<arg name="show_camera" default="true"/>
	<arg name="build_map" default="false"/>

	<!-- Load World -->
	<include file="$(find olin_gazebo)/launch/world.launch"/>

	<!-- Load Controller -->
	<include file="$(find olin_control)/launch/olin_control_diff.launch"/>
	<include file="$(find olin_control)/launch/olin_teleop_key.launch"/>

	<!-- Fake GPS -->
	<node name="gps" pkg="olin_gazebo" type="fake_gps"/>

	<!-- Deprecated : Load RQT interface to controller -->
	<!--<include file="$(find olin_control)/launch/olin_rqt.launch"/>-->

	<group if="$(arg show_sensors)">
		<!-- Load imageview for camera -->
		<group if="$(arg show_camera)">
			<node name="image_view" pkg="image_view" type="image_view" args="image:=/olin/camera_1/image_raw" />
		</group>

		<!-- Visualize LIDAR status-->
		<group unless="$(arg build_map)">
			<node name="rviz" pkg="rviz" type="rviz" args="-d $(find olin_gazebo)/launch/lidar.rviz"/>
		</group>

		<!-- Build Map and show progress) -->
		<group if="$(arg build_map)">
			<node name="mapper" pkg="gmapping" type="slam_gmapping" args="scan:=/olin/laser/scan _odom_frame:=/odom"/>
			<node name="rviz" pkg="rviz" type="rviz" args="-d $(find olin_gazebo)/launch/map.rviz"/>
		</group>

		<!-- Record LIDAR / tf data -->
		<!--<node name="recorder" pkg="rosbag" type="record" args="-o /tmp/lidar /olin/laser/scan /tf"/>-->
	</group>
</launch>
